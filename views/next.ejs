<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>세부 항목 선택</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/dropdown.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="container">
    <h1>🔍 선택된 병명</h1>
    <p><strong>코드:</strong> <%= Code %></p>
    <p><strong>병명:</strong> <%= Name %></p>

    <h2>📋 추가 정보 선택</h2>

    <label for="severity">중증도</label>
    <select id="severity">
      <option value="">선택하세요</option>
      <option value="low">경증</option>
      <option value="moderate">중간</option>
      <option value="severe">중증</option>
    </select>

    <label for="duration">예상 치료 기간</label>
    <select id="duration">
      <option value="">선택하세요</option>
      <option value="short">1주 이내</option>
      <option value="medium">1~4주</option>
      <option value="long">한 달 이상</option>
    </select>

    <label for="insurance">보험 적용 여부</label>
    <select id="insurance">
      <option value="">선택하세요</option>
      <option value="yes">적용됨</option>
      <option value="no">미적용</option>
    </select>

    <label for="treatment">치료 방법</label>
    <select id="treatment">
      <option value="">선택하세요</option>
      <option value="medicine">약물 치료</option>
      <option value="surgery">수술</option>
      <option value="therapy">물리 치료</option>
      <option value="etc">기타</option>
    </select>

    <button onclick="submitSelections()">다음 단계로</button>
  </div>

  <script>
    function submitSelections() {
      const severity = document.getElementById("severity").value;
      const duration = document.getElementById("duration").value;
      const insurance = document.getElementById("insurance").value;
      const treatment = document.getElementById("treatment").value;

      if (!severity || !duration || !insurance || !treatment) {
        alert("모든 항목을 선택해주세요.");
        return;
      }

      const query = new URLSearchParams({
        Code: "<%= Code %>",
        Name: "<%= Name %>",
        severity,
        duration,
        insurance,
        treatment
      }).toString();

      window.location.href = "/final?" + query;
    }
  </script>
</body>
</html>
